
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–†—É–ª–µ—Ç–∫–∞</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; margin: 0; padding: 0; background: #111; color: white; }
  h1 { margin-top: 20px; }
  #roulette { margin: 40px auto; width: 320px; height: 100px; overflow: hidden; border: 2px solid #444; background: #222; position: relative; }
  .strip { display: flex; position: absolute; top: 0; left: 0; height: 100px; }
  .item { width: 100px; height: 100px; display: flex; align-items: center; justify-content: center; font-size: 20px; background: gold; border: 1px solid #555; margin-right: 10px; border-radius: 10px; color: black; }
  button { padding: 10px 20px; font-size: 16px; margin: 10px; cursor: pointer; border-radius: 8px; border: none; background: #007bff; color: white; }
  button:hover { background: #0056b3; }
  .footer { background: #222; padding: 15px; margin-top: 20px; border-top: 1px solid #444; }
  .prizes { text-align: left; display: inline-block; margin-top: 10px; }
  select { padding: 5px; font-size: 16px; border-radius: 5px; border: none; margin-top: 10px; }
</style>
</head>
<body>

<h1>üé∞ –†—É–ª–µ—Ç–∫–∞</h1>
<p>–ë–∞–ª–∞–Ω—Å: <span id="balance">100</span> ‚≠ê</p>
<div id="roulette">
  <div class="strip" id="strip"></div>
</div>
<button onclick="spin()">–ö—Ä—É—Ç–∏—Ç—å (25‚≠ê)</button>

<div class="footer">
  <div>
    <select id="topupAmount">
      <option value="50">+50 ‚≠ê</option>
      <option value="100">+100 ‚≠ê</option>
      <option value="500">+500 ‚≠ê</option>
      <option value="1000">+1000 ‚≠ê</option>
    </select>
    <button onclick="addStars()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
  </div>
  <button onclick="window.location.href='tasks.html'">–ó–∞–¥–∞–Ω–∏—è</button>
  <div class="prizes">
    <p><b>–ü—Ä–∏–∑—ã –∏ —à–∞–Ω—Å—ã:</b></p>
    <p>‚≠ê100 ‚Äî 1%</p>
    <p>‚≠ê50 ‚Äî 2.5%</p>
    <p>‚≠ê40 ‚Äî 10%</p>
    <p>‚≠ê30 ‚Äî 15%</p>
    <p>‚≠ê25 ‚Äî 25%</p>
    <p>‚≠ê15 ‚Äî 50%</p>
  </div>
</div>

<script>
let balance = 100;
let prizes = [
  {stars: 100, chance: 1},
  {stars: 50, chance: 2.5},
  {stars: 40, chance: 10},
  {stars: 30, chance: 15},
  {stars: 25, chance: 25},
  {stars: 15, chance: 50}
];

let strip = document.getElementById('strip');

function renderStrip() {
  strip.innerHTML = "";
  for (let i = 0; i < 30; i++) {
    let prize = getRandomPrize();
    let div = document.createElement('div');
    div.className = "item";
    div.innerText = `‚≠ê${prize}`;
    strip.appendChild(div);
  }
}

function getRandomPrize() {
  let rand = Math.random() * 100;
  let cumulative = 0;
  for (let p of prizes) {
    cumulative += p.chance;
    if (rand <= cumulative) return p.stars;
  }
  return prizes[prizes.length - 1].stars;
}

function spin() {
  if (balance < 25) {
    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤—ë–∑–¥!");
    return;
  }
  balance -= 25;
  document.getElementById('balance').innerText = balance;

  renderStrip();

  let distance = -((Math.floor(Math.random() * 26) + 2) * 110);
  strip.style.transition = "transform 3.5s cubic-bezier(0.25, 1, 0.5, 1)";
  strip.style.transform = `translateX(${distance}px)`;

  setTimeout(() => {
    let index = Math.abs(Math.round(distance / 110));
    let prize = parseInt(strip.children[index].innerText.replace('‚≠ê',''));
    balance += prize;
    document.getElementById('balance').innerText = balance;
    alert(`–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ‚≠ê${prize}!`);
    strip.style.transition = "none";
    strip.style.transform = "translateX(0px)";
  }, 3500);
}

function addStars() {
  let amount = parseInt(document.getElementById('topupAmount').value);
  balance += amount;
  document.getElementById('balance').innerText = balance;
}

renderStrip();
</script>

</body>
</html>
